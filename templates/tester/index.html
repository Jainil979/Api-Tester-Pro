{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APITester Pro - API Testing Tool</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Your custom CSS -->
    <link rel="stylesheet" href="{% static 'tester/css/style.css' %}">
    
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <i class="fas fa-bolt text-blue-500 text-2xl mr-3"></i>
                    <h1 class="text-2xl font-bold text-gray-800">APITester Pro</h1>
                </div>
                {% comment %} <div class="flex items-center">
                    <div class="mr-4 text-sm text-gray-600">No API key required</div>
                    <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition duration-200">
                        <i class="fas fa-history mr-2"></i>History
                    </button>
                </div> {% endcomment %}
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8">
        <!-- Request Section -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center mb-6">
                <h2 class="text-xl font-semibold text-gray-800">API Request</h2>
                <div class="ml-4 flex-1 border-b"></div>
            </div>

            <!-- URL and Method Section -->
            <div class="flex mb-6">
                <div class="relative w-32 mr-4">
                    <select id="method" class="w-full p-3 border border-gray-300 rounded-lg appearance-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono font-semibold">
                        <option class="text-green-600">GET</option>
                        <option class="text-blue-600">POST</option>
                        <option class="text-yellow-600">PUT</option>
                        <option class="text-purple-600">PATCH</option>
                        <option class="text-red-600">DELETE</option>
                        <option class="text-gray-600">HEAD</option>
                        <option class="text-gray-600">OPTIONS</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <input type="text" id="url" placeholder="https://api.example.com/users" class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono">
                <button id="send-btn" class="ml-4 bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition duration-200 flex items-center">
                    <i class="fas fa-paper-plane mr-2"></i>Send
                </button>
            </div>

            <!-- Tabs for Params, Auth, Headers, Body -->
            <div class="border-b border-gray-200 mb-6">
                <div class="flex space-x-6">
                    <button data-tab="params" class="py-2 px-1 tab-active text-gray-900">Parameters</button>
                    <button data-tab="auth" class="py-2 px-1 text-gray-600 hover:text-gray-900">Authentication</button>
                    <button data-tab="headers" class="py-2 px-1 text-gray-600 hover:text-gray-900">Headers</button>
                    <button data-tab="body" class="py-2 px-1 text-gray-600 hover:text-gray-900">Body</button>
                </div>
            </div>

            <!-- Parameters Section -->
            <div data-tab-content="params" class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-medium text-gray-700">Query Parameters</h3>
                    <button id="add-param-btn" class="text-blue-500 hover:text-blue-700 text-sm font-medium">
                        <i class="fas fa-plus mr-1"></i>Add Parameter
                    </button>
                </div>
                <div class="grid grid-cols-12 gap-4 mb-2 text-sm text-gray-500 font-medium">
                    <div class="col-span-5">Key</div>
                    <div class="col-span-5">Value</div>
                    <div class="col-span-2">Action</div>
                </div>
                <div id="params-container">
                    <div data-param-row class="grid grid-cols-12 gap-4 mb-3">
                        <div class="col-span-5">
                            <input type="text" placeholder="parameter_name" class="w-full p-2 border border-gray-300 rounded">
                        </div>
                        <div class="col-span-5">
                            <input type="text" placeholder="value" class="w-full p-2 border border-gray-300 rounded">
                        </div>
                        <div class="col-span-2">
                            <button class="remove-param-btn text-red-500 hover:text-red-700 w-full py-2">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Update your Authentication section with proper IDs and structure -->
            <div data-tab-content="auth" class="mb-6 hidden">
                <h3 class="font-medium text-gray-700 mb-4">Authentication</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="border border-gray-200 rounded-lg p-4">
                        <h4 class="font-medium text-gray-700 mb-3">Basic Auth</h4>
                        <div class="space-y-3">
                            <input type="text" id="basic-username" placeholder="Username" class="w-full p-2 border border-gray-300 rounded">
                            <input type="password" id="basic-password" placeholder="Password" class="w-full p-2 border border-gray-300 rounded">
                            <button id="add-basic-auth" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
                                Add to Headers
                            </button>
                        </div>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-4">
                        <h4 class="font-medium text-gray-700 mb-3">Bearer Token</h4>
                        <div class="space-y-3">
                            <input type="text" id="bearer-token" placeholder="Token" class="w-full p-2 border border-gray-300 rounded">
                            <button id="add-bearer-auth" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
                                Add to Headers
                            </button>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Headers Section -->
            <div data-tab-content="headers" class="mb-6 hidden">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-medium text-gray-700">Headers</h3>
                    <button id="add-header-btn" class="text-blue-500 hover:text-blue-700 text-sm font-medium">
                        <i class="fas fa-plus mr-1"></i>Add Header
                    </button>
                </div>
                <div class="grid grid-cols-12 gap-4 mb-2 text-sm text-gray-500 font-medium">
                    <div class="col-span-5">Key</div>
                    <div class="col-span-5">Value</div>
                    <div class="col-span-2">Action</div>
                </div>
                <div id="headers-container">
                    <div class="header-row grid grid-cols-12 gap-4 mb-3">
                        <div class="col-span-5">
                            <input type="text" value="Content-Type" class="w-full p-2 border border-gray-300 rounded font-mono">
                        </div>
                        <div class="col-span-5">
                            <input type="text" value="application/json" class="w-full p-2 border border-gray-300 rounded font-mono">
                        </div>
                        <div class="col-span-2">
                            <button class="remove-header-btn text-red-500 hover:text-red-700 w-full py-2">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Update your Body section with proper toggle and placeholder -->
            <div data-tab-content="body" data-body-section class="hidden">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-medium text-gray-700">Body</h3>
                    <div class="flex" id="body-format-toggle">
                        <button data-format="raw" class="px-3 py-1 bg-blue-500 text-white rounded-l-lg body-format-btn">Raw</button>
                        <button data-format="json" class="px-3 py-1 bg-gray-200 text-gray-700 rounded-r-lg body-format-btn">JSON</button>
                    </div>
                </div>
                <!-- Replace the existing body textarea with this -->
                <div class="border border-gray-300 rounded-lg">
                    <textarea id="request-body" class="w-full p-4 font-mono text-sm" rows="8" placeholder='{
                        "id": 1,
                        "name": "John Doe",
                        "email": "john@example.com"
                        }'>
                    </textarea>
                </div>
            </div>



        </div>

        <!-- Response Section -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            
            <!-- Replace the entire status and metrics section with this code -->
            <div class="mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">Response Details</h3>
                    <button class="text-blue-500 hover:text-blue-700 flex items-center">
                        <i class="fas fa-copy mr-1"></i>Copy Response
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                    <!-- Status Card -->
                    <div class="bg-white border rounded-lg p-4 shadow-sm">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-gray-600">Status</span>
                            <i class="fas fa-check-circle text-green-500"></i>
                        </div>
                        <div class="flex items-baseline">
                            <span id="status-code" class="text-2xl font-bold text-gray-800">-</span>
                            <span id="status-text" class="ml-2 text-sm text-gray-500"></span>
                        </div>
                        <div id="http-version" class="text-xs text-gray-400 mt-1">HTTP/-</div>
                    </div>
                    
                    <!-- Time Card -->
                    <div class="bg-white border rounded-lg p-4 shadow-sm">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-gray-600">Time</span>
                            <i class="fas fa-clock text-blue-500"></i>
                        </div>
                        <div class="flex items-baseline">
                            <span id="response-time" class="text-2xl font-bold text-gray-800">-</span>
                            <span class="ml-1 text-sm text-gray-500">ms</span>
                        </div>
                        <div class="text-xs text-gray-400 mt-1">Response duration</div>
                    </div>
                    
                    <!-- Size Card -->
                    <div class="bg-white border rounded-lg p-4 shadow-sm">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-gray-600">Size</span>
                            <i class="fas fa-weight-hanging text-purple-500"></i>
                        </div>
                        <div class="flex items-baseline">
                            <span id="response-size" class="text-2xl font-bold text-gray-800">-</span>
                            <span id="size-unit" class="ml-1 text-sm text-gray-500">B</span>
                        </div>
                        <div class="text-xs text-gray-400 mt-1">Content length</div>
                    </div>
                    
                    <!-- HTTP Version Card -->
                    <div class="bg-white border rounded-lg p-4 shadow-sm">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-gray-600">Protocol</span>
                            <i class="fas fa-network-wired text-orange-500"></i>
                        </div>
                        <div class="flex items-baseline">
                            <span id="response-protocol" class="text-2xl font-bold text-gray-800">HTTP</span>
                            <span id="protocol-version" class="ml-1 text-sm text-gray-500">/1.1</span>
                        </div>
                        <div class="text-xs text-gray-400 mt-1">HTTP version</div>
                    </div>
                </div>
            </div>


            <!-- Response Headers -->
            <div class="mb-6">
                <h3 class="font-medium text-gray-700 mb-3">Headers</h3>
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Value</th>
                            </tr>
                        </thead>
                        <tbody id="response-headers">
                            <tr>
                                <td class="px-4 py-3 text-sm text-gray-500 text-center" colspan="2">No headers received yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Response Body -->
            <div>
                <h3 class="font-medium text-gray-700 mb-3">Body</h3>
                <div class="json-code p-4">
                    <pre id="response-body">Send a request to see response body</pre>
                </div>
            </div>
        </div>
    </div>

    <footer class="mt-12 py-6 bg-gray-100 border-t border-gray-200">
        <div class="container mx-auto px-4 text-center text-gray-600 text-sm">
            <p>APITester Pro - A powerful API testing tool built with Django & Tailwind CSS</p>
            <p class="mt-2">© 2023 APITester Pro. All rights reserved.</p>
        </div>
    </footer>

    <script src="{% static 'tester/js/main.js' %}"></script>

</body>
</html>